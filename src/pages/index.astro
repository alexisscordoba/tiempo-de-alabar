---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import { getEntry } from "astro:content";

const inicio = await getEntry("pages", "inicio");

if (!inicio) {
	throw new Error("No se encontró la página de inicio en el Content Layer.");
}

import Inspirational from "../components/Inspirational.astro";
import FeaturedGrid from "../components/FeaturedGrid.astro";
import MusicPreview from "../components/MusicPreview.astro";

const { hero, seo, quote_block, featured, musica_snippet } = inicio.data;
---

<Layout title={seo?.title || "Inicio | Tiempo de Alabar"}>
	{
		hero && (
			<Hero
				title={hero.title || ""}
				subtitle={hero.subtitle || ""}
				background={hero.background}
				badge_text="Sitio Oficial"
				cta_primary={
					hero.cta_primary_label
						? {
								label: hero.cta_primary_label,
								link: hero.cta_primary_link || "#",
							}
						: undefined
				}
				cta_secondary={
					hero.cta_secondary_label
						? {
								label: hero.cta_secondary_label,
								link: hero.cta_secondary_link || "#",
							}
						: undefined
				}
			/>
		)
	}

	{/* Inspirational Quote Section */}
	{
		quote_block?.active && quote_block.text && (
			<Inspirational text={quote_block.text} author="Salmos 33:2" />
		)
	}

	{/* Featured Content Grid (Bento) */}
	{featured && <FeaturedGrid featured={featured} />}

	{/* Music Preview Section */}
	{
		musica_snippet && (
			<MusicPreview
				title={musica_snippet.title}
				text={musica_snippet.text}
				buttonLabel={musica_snippet.button_label}
			/>
		)
	}
</Layout>
